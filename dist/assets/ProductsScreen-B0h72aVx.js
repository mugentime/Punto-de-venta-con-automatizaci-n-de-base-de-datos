import{r as n,j as e,a as $,u as T,U as D,b as V,c as R,T as A}from"./index-CecK8F-0.js";const W=async(u,h)=>{try{const o=await fetch("/api/generate-description",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:u,keywords:h})});if(!o.ok){const r=await o.json();throw console.error("API Error:",r.error),new Error(r.error||"Server error")}return(await o.json()).description}catch(o){throw console.error("Error fetching description:",o),o instanceof Error?new Error(`Error al generar descripciÃ³n: ${o.message}`):new Error("No se pudo generar la descripciÃ³n. Por favor, verifique su conexiÃ³n e intÃ©ntelo de nuevo.")}},B=async(u,h)=>{try{const o=await fetch("/api/generate-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:u,description:h})});if(!o.ok){const r=await o.json();throw console.error("API Error:",r.error),new Error(r.error||"Server error")}return(await o.json()).imageUrl}catch(o){return console.error("Error fetching image:",o),"https://picsum.photos/seed/error/400"}},O=({isOpen:u,onClose:h,onSave:o,productToEdit:i})=>{const[r,b]=n.useState({name:"",price:0,cost:0,stock:0,description:"",imageUrl:"",category:"CafeterÃ­a"}),[g,N]=n.useState(!1),[j,y]=n.useState(!1);n.useEffect(()=>{b(i||{name:"",price:0,cost:0,stock:0,description:"",imageUrl:"",category:"CafeterÃ­a"})},[i,u]);const m=a=>{const{name:d,value:l}=a.target;b(v=>({...v,[d]:d==="price"||d==="stock"||d==="cost"?parseFloat(l)||0:l}))},k=async()=>{if(!r.name){alert("Por favor, ingrese un nombre de producto primero.");return}N(!0);try{const a=r.category?`${r.category}, premium, calidad`:"premium, calidad",d=await W(r.name,a);b(l=>({...l,description:d}))}catch(a){console.error("Error generating description:",a),alert(a instanceof Error?a.message:"Error al generar la descripciÃ³n")}finally{N(!1)}},c=async()=>{if(!r.name){alert("Por favor, ingrese un nombre de producto primero.");return}y(!0);try{const a=await B(r.name,r.description);b(d=>({...d,imageUrl:a}))}catch(a){console.error(a)}finally{y(!1)}},p=a=>{if(a.preventDefault(),!r.imageUrl){alert("Por favor, genere una imagen para el producto.");return}o(r),h()};return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-end md:items-center p-0 md:p-4 overflow-hidden",children:e.jsx("div",{className:"bg-white rounded-t-3xl md:rounded-3xl shadow-xl w-full md:max-w-2xl max-h-[95vh] md:max-h-[90vh] flex flex-col animate-slide-up",children:e.jsxs("form",{onSubmit:p,className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-200 flex items-center justify-between flex-shrink-0",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-slate-800",children:i?"Editar Producto":"Nuevo Producto"}),e.jsx("button",{type:"button",onClick:h,className:"p-2 hover:bg-slate-100 rounded-full transition-colors touch-manipulation",children:e.jsx("svg",{className:"h-6 w-6 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-4 md:p-6 overflow-y-auto flex-1 min-h-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-base font-medium text-slate-700 mb-2",children:"Nombre del Producto"}),e.jsx("input",{type:"text",name:"name",id:"name",value:r.name,onChange:m,inputMode:"text",className:"block w-full border border-slate-300 rounded-xl shadow-sm py-3 px-4 text-base focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation",placeholder:"Ej: CafÃ© Americano Grande",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"block text-base font-medium text-slate-700 mb-2",children:"Precio de Venta"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-lg font-medium",children:"$"}),e.jsx("input",{type:"number",name:"price",id:"price",value:r.price,onChange:m,inputMode:"decimal",step:"0.01",min:"0",className:"block w-full border border-slate-300 rounded-xl shadow-sm py-3 pl-8 pr-4 text-base focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cost",className:"block text-base font-medium text-slate-700 mb-2",children:"Costo"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-lg font-medium",children:"$"}),e.jsx("input",{type:"number",name:"cost",id:"cost",value:r.cost,onChange:m,inputMode:"decimal",step:"0.01",min:"0",className:"block w-full border border-slate-300 rounded-xl shadow-sm py-3 pl-8 pr-4 text-base focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation",placeholder:"0.00",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock",className:"block text-base font-medium text-slate-700 mb-2",children:"Stock Inicial"}),e.jsx("input",{type:"number",name:"stock",id:"stock",value:r.stock,onChange:m,inputMode:"numeric",min:"0",className:"block w-full border border-slate-300 rounded-xl shadow-sm py-3 px-4 text-base focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation",placeholder:"0",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-base font-medium text-slate-700 mb-2",children:"CategorÃ­a"}),e.jsxs("select",{name:"category",id:"category",value:r.category,onChange:m,className:"block w-full border border-slate-300 rounded-xl shadow-sm py-3 px-4 text-base focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation bg-white",required:!0,children:[e.jsx("option",{value:"CafeterÃ­a",children:"â˜• CafeterÃ­a"}),e.jsx("option",{value:"Refrigerador",children:"ðŸ§Š Refrigerador"}),e.jsx("option",{value:"Alimentos",children:"ðŸž Alimentos"}),e.jsx("option",{value:"MembresÃ­as",children:"ðŸ’¼ MembresÃ­as de Coworking"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-base font-medium text-slate-700 mb-2",children:"Imagen del Producto"}),e.jsx("div",{className:"bg-slate-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsx("div",{className:"w-full md:w-32 h-40 md:h-32 bg-slate-200 rounded-xl flex items-center justify-center overflow-hidden flex-shrink-0",children:j?e.jsx("div",{className:"w-10 h-10 border-4 border-zinc-400 border-t-transparent rounded-full animate-spin"}):r.imageUrl?e.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14"})})}),e.jsxs("div",{className:"flex-1 w-full space-y-3",children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Genere una imagen para el producto usando IA. Se recomienda tener un nombre descriptivo."}),e.jsxs("button",{type:"button",onClick:c,disabled:j||!r.name,className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl shadow-sm hover:from-purple-700 hover:to-indigo-700 disabled:from-slate-300 disabled:to-slate-400 disabled:cursor-not-allowed transition-all font-medium touch-manipulation",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),j?"Generando Imagen...":"Generar con IA"]})]})]})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-base font-medium text-slate-700 mb-2",children:"DescripciÃ³n"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{name:"description",id:"description",value:r.description,onChange:m,rows:4,inputMode:"text",className:"block w-full border border-slate-300 rounded-xl shadow-sm py-3 px-4 text-base focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation resize-none",placeholder:"DescripciÃ³n del producto (opcional)"}),e.jsx("button",{type:"button",onClick:k,disabled:g||!r.name,className:"absolute bottom-3 right-3 p-2 bg-white border border-slate-300 text-slate-600 rounded-xl hover:bg-slate-50 disabled:bg-slate-100 disabled:text-slate-400 disabled:cursor-not-allowed transition-colors shadow-sm touch-manipulation",title:"Generar descripciÃ³n con IA",children:g?e.jsx("div",{className:"w-5 h-5 border-2 border-zinc-400 border-t-transparent rounded-full animate-spin"}):e.jsx($,{className:"w-5 h-5"})})]})]})]})}),e.jsxs("div",{className:"bg-slate-50 p-4 md:px-6 md:py-4 flex flex-col-reverse md:flex-row gap-3 md:justify-end border-t border-slate-200 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:h,className:"w-full md:w-auto px-6 py-3 bg-white border-2 border-slate-300 rounded-xl text-base font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500 touch-manipulation",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"w-full md:w-auto px-6 py-3 bg-zinc-900 border-2 border-transparent rounded-xl text-base font-medium text-white hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500 shadow-md touch-manipulation",children:i?"Actualizar Producto":"Crear Producto"})]})]})})}):null},X=({isOpen:u,onClose:h})=>{const{importProducts:o}=T(),[i,r]=n.useState(null),[b,g]=n.useState(null),[N,j]=n.useState(!1),y=c=>{var a;const p=(a=c.target.files)==null?void 0:a[0];p&&(p.type==="text/csv"||p.name.endsWith(".csv")?(r(p),g(null)):(g("Por favor, seleccione un archivo .csv"),r(null)))},m=()=>{const a=`name,price,cost,stock,description,category,imageUrl
"CafÃ© de Olla",45,15,80,"CafÃ© endulzado con piloncillo y canela.","CafeterÃ­a","https://picsum.photos/seed/cafeolla/400"`,d=new Blob([a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),v=URL.createObjectURL(d);l.setAttribute("href",v),l.setAttribute("download","plantilla_productos.csv"),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},k=()=>{if(!i){g("Por favor, seleccione un archivo para importar.");return}j(!0);const c=new FileReader;c.onload=p=>{var a;try{const l=((a=p.target)==null?void 0:a.result).trim().split(/\r?\n/),v=l.shift();if(!v)throw new Error("El archivo CSV estÃ¡ vacÃ­o o no tiene encabezado.");const C=v.split(",").map(x=>x.trim()),S=["name","price","cost","stock","category"];for(const x of S)if(!C.includes(x))throw new Error(`El archivo CSV debe contener la columna "${x}".`);const z=l.map(x=>{const P=x.split(","),f={};C.forEach((E,L)=>{var I;f[E]=((I=P[L])==null?void 0:I.trim().replace(/"/g,""))||""});const M=["CafeterÃ­a","Refrigerador","Alimentos"].includes(f.category)?f.category:"CafeterÃ­a";return{name:f.name,price:parseFloat(f.price)||0,cost:parseFloat(f.cost)||0,stock:parseInt(f.stock,10)||0,description:f.description||"",category:M,imageUrl:f.imageUrl||`https://picsum.photos/seed/${encodeURIComponent(f.name)}/400`}}).filter(x=>x.name);o(z),h()}catch(d){g(`Error al procesar el archivo: ${d.message}`)}finally{j(!1)}},c.onerror=()=>{g("No se pudo leer el archivo."),j(!1)},c.readAsText(i)};return n.useEffect(()=>{u||(r(null),g(null),j(!1))},[u]),u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl w-full max-w-lg max-h-[90vh] my-auto flex flex-col",children:[e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Importar Productos desde CSV"}),e.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:["Sube un archivo CSV para aÃ±adir nuevos productos o actualizar los existentes. El sistema buscarÃ¡ productos por el campo ",e.jsx("code",{className:"bg-slate-100 text-xs p-1 rounded",children:"name"})," para actualizarlos."]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl mb-4 text-sm space-y-2",children:[e.jsx("p",{className:"font-semibold text-slate-700",children:"Instrucciones:"}),e.jsxs("ul",{className:"list-disc list-inside text-slate-600 text-xs",children:[e.jsx("li",{children:"El archivo debe ser formato .csv."}),e.jsxs("li",{children:["La primera fila debe contener los encabezados: ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"name,price,cost,stock,description,category,imageUrl"}),"."]}),e.jsxs("li",{children:["Las columnas ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"name"}),", ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"price"}),", ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"cost"}),", ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"stock"})," y ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"category"})," son obligatorias."]}),e.jsxs("li",{children:["Valores para ",e.jsx("code",{className:"bg-slate-200 text-xs p-1 rounded",children:"category"}),": CafeterÃ­a, Refrigerador, Alimentos."]}),e.jsx("li",{children:e.jsx("button",{onClick:m,className:"text-blue-600 hover:underline font-medium",children:"Descargar plantilla de ejemplo"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 mb-2",children:"Seleccionar archivo CSV"}),e.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-xl",children:e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(D,{className:"mx-auto h-12 w-12 text-slate-400"}),e.jsxs("div",{className:"flex text-sm text-slate-600",children:[e.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white rounded-md font-medium text-zinc-600 hover:text-zinc-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-zinc-500",children:[e.jsx("span",{children:"Sube un archivo"}),e.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".csv",onChange:y})]}),e.jsx("p",{className:"pl-1",children:"o arrÃ¡stralo aquÃ­"})]}),i&&e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:i.name}),!i&&e.jsx("p",{className:"text-xs text-slate-500",children:"CSV hasta 1MB"})]})})]}),b&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:b})]}),e.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end space-x-3 rounded-b-3xl flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 bg-white border border-slate-300 rounded-xl text-sm font-medium text-slate-700 hover:bg-slate-50",children:"Cancelar"}),e.jsx("button",{type:"button",onClick:k,disabled:!i||N,className:"px-4 py-2 bg-zinc-900 border border-transparent rounded-xl text-sm font-medium text-white hover:bg-zinc-800 disabled:bg-zinc-400 disabled:cursor-not-allowed",children:N?"Procesando...":"Importar Productos"})]})]})}):null},J=()=>{const{products:u,addProduct:h,updateProduct:o,deleteProduct:i}=T(),[r,b]=n.useState(!1),[g,N]=n.useState(!1),[j,y]=n.useState(null),[m,k]=n.useState(""),[c,p]=n.useState("all"),[a,d]=n.useState(!1),[l,v]=n.useState(null),[C,S]=n.useState({}),z=n.useRef(0),x=n.useRef(0),P=(s=null)=>{y(s),b(!0)},f=()=>{y(null),b(!1)},M=s=>{"id"in s?o(s):h(s)},E=s=>{window.innerWidth<768?l===s?(i(s),v(null),S({})):(v(s),setTimeout(()=>v(null),3e3)):window.confirm("Â¿EstÃ¡ seguro de eliminar este producto?")&&i(s)},L=(s,t)=>{window.innerWidth>=768||(z.current=s.touches[0].clientX,x.current=s.touches[0].clientX)},I=(s,t)=>{if(window.innerWidth>=768)return;x.current=s.touches[0].clientX;const w=x.current-z.current;w<-50&&w>-150&&S({[t]:w})},G=s=>{if(window.innerWidth>=768)return;x.current-z.current<-100?S({[s]:-120}):S({})},F=[{name:"Todos",key:"all",icon:"ðŸ“¦",color:"from-slate-50 to-gray-50"},{name:"CafeterÃ­a",key:"CafeterÃ­a",icon:"â˜•",color:"from-amber-50 to-orange-50"},{name:"Refrigerador",key:"Refrigerador",icon:"ðŸ§Š",color:"from-blue-50 to-cyan-50"},{name:"Alimentos",key:"Alimentos",icon:"ðŸž",color:"from-green-50 to-emerald-50"},{name:"MembresÃ­as",key:"MembresÃ­as",icon:"ðŸ’¼",color:"from-purple-50 to-violet-50"}],U=u.filter(s=>{const t=s.name.toLowerCase().includes(m.toLowerCase())||s.description.toLowerCase().includes(m.toLowerCase()),w=c==="all"||s.category===c;return t&&w}),q=F.filter(s=>s.key==="all"||c==="all"||s.key===c).map(s=>({...s,products:s.key==="all"?U:U.filter(t=>t.category===s.key)}));return e.jsxs("div",{className:"pb-20 md:pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 mb-4 md:flex-row md:justify-between md:items-center md:mb-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800",children:"Productos"}),e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsxs("button",{onClick:()=>d(!a),className:"md:hidden flex items-center justify-center px-4 py-3 bg-white border border-slate-300 text-slate-700 rounded-xl shadow-sm hover:bg-slate-50 transition-colors",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Buscar"]}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center justify-center px-4 py-3 md:py-2 bg-white border border-slate-300 text-slate-700 rounded-xl shadow-sm hover:bg-slate-50 transition-colors touch-manipulation",children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"md:inline",children:"Importar"})]}),e.jsxs("button",{onClick:()=>P(),className:"flex items-center justify-center px-4 py-3 md:py-2 bg-zinc-900 text-white rounded-xl shadow-sm hover:bg-zinc-800 transition-colors touch-manipulation",children:[e.jsx(V,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"md:inline",children:"Nuevo Producto"})]})]})]}),e.jsx("div",{className:`${a?"block":"hidden"} md:block mb-4 transition-all duration-300`,children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"search",inputMode:"search",placeholder:"Buscar productos por nombre o descripciÃ³n...",value:m,onChange:s=>k(s.target.value),className:"w-full px-4 py-3 pl-11 pr-4 text-base border border-slate-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation"}),e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m&&e.jsx("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-100 rounded-full touch-manipulation",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"md:hidden",children:e.jsx("select",{value:c,onChange:s=>p(s.target.value),className:"w-full px-4 py-3 text-base border border-slate-300 rounded-xl shadow-sm focus:outline-none focus:ring-2 focus:ring-zinc-500 focus:border-zinc-500 touch-manipulation bg-white",children:F.map(s=>e.jsxs("option",{value:s.key,children:[s.icon," ",s.name]},s.key))})}),e.jsx("div",{className:"hidden md:flex gap-2 overflow-x-auto pb-2",children:F.map(s=>e.jsxs("button",{onClick:()=>p(s.key),className:`flex items-center px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-all ${c===s.key?"bg-zinc-900 text-white shadow-md":"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50"}`,children:[e.jsx("span",{className:"text-xl mr-2",children:s.icon}),s.name]},s.key))})]}),e.jsx("div",{className:"space-y-6",children:q.map(s=>s.key!=="all"&&s.products.length===0?null:e.jsxs("div",{children:[c!=="all"&&e.jsx("div",{className:`bg-gradient-to-r ${s.color} rounded-2xl p-4 mb-4 border border-slate-200`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-3xl mr-3",children:s.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:s.name}),e.jsxs("p",{className:"text-sm text-slate-600",children:[s.products.length," producto",s.products.length!==1?"s":""]})]})]})}),s.products.length===0?e.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center text-slate-500 border-2 border-dashed border-slate-200",children:[e.jsxs("p",{className:"text-base",children:["No hay productos ",c!=="all"?"en esta categorÃ­a":"disponibles"]}),m&&e.jsx("p",{className:"text-sm mt-2",children:"Intenta con otra bÃºsqueda"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white shadow-md rounded-2xl overflow-hidden hidden md:block",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Producto"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Precio"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Costo"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Stock"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:s.products.map(t=>e.jsxs("tr",{className:"border-b hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"h-12 w-12 rounded-xl object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:t.name}),e.jsx("p",{className:"text-xs text-slate-500 max-w-xs truncate",children:t.description})]})]})}),e.jsxs("td",{className:"p-4 text-sm text-slate-800 font-semibold",children:["$",t.price.toFixed(2)]}),e.jsxs("td",{className:"p-4 text-sm text-slate-500",children:["$",t.cost.toFixed(2)]}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:t.stock}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>P(t),className:"p-2 text-slate-500 hover:text-zinc-700 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>E(t.id),className:"p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(A,{className:"h-5 w-5"})})]})})]},t.id))})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:hidden gap-4",children:s.products.map(t=>e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-md overflow-hidden touch-manipulation",children:[e.jsx("div",{className:"relative transition-transform duration-200",style:{transform:`translateX(${C[t.id]||0}px)`},onTouchStart:w=>L(w,t.id),onTouchMove:w=>I(w,t.id),onTouchEnd:()=>G(t.id),children:e.jsxs("div",{className:"bg-white",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2 bg-white px-3 py-1 rounded-full shadow-md",children:e.jsxs("span",{className:"text-lg font-bold text-zinc-800",children:["$",t.price.toFixed(2)]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 mb-1",children:t.name}),t.description&&e.jsx("p",{className:"text-sm text-slate-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Costo"}),e.jsxs("div",{className:"font-semibold text-slate-800",children:["$",t.cost.toFixed(2)]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Stock"}),e.jsx("div",{className:"font-semibold text-slate-800",children:t.stock})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>P(t),className:"flex-1 flex items-center justify-center px-4 py-3 bg-zinc-900 text-white rounded-xl font-medium hover:bg-zinc-800 transition-colors touch-manipulation",children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),"Editar"]}),e.jsxs("button",{onClick:()=>E(t.id),className:`flex-1 flex items-center justify-center px-4 py-3 rounded-xl font-medium transition-colors touch-manipulation ${l===t.id?"bg-red-600 text-white":"bg-slate-100 text-slate-700 hover:bg-red-50 hover:text-red-600"}`,children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),l===t.id?"Confirmar":"Eliminar"]})]})]})]})}),C[t.id]&&C[t.id]<-50&&e.jsx("div",{className:"absolute inset-y-0 right-0 w-24 bg-red-600 flex items-center justify-center",children:e.jsx(A,{className:"h-6 w-6 text-white"})})]},t.id))})]})]},s.key))}),e.jsx(O,{isOpen:r,onClose:f,onSave:M,productToEdit:j}),e.jsx(X,{isOpen:g,onClose:()=>N(!1)})]})};export{J as default};
