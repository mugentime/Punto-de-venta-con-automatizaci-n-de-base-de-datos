import{u as $,r as k,j as e,D as C,P as O,S as E,E as P,C as T,H as F}from"./index-CecK8F-0.js";import{d as I,S as o}from"./deduplication-CNSci7KQ.js";const R=()=>{const{orders:h,expenses:g,coworkingSessions:p}=$(),[l,w]=k.useState("today"),j=I(h),c=({label:s,value:t})=>e.jsx("button",{onClick:()=>w(t),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${l===t?"bg-zinc-900 text-white":"text-slate-600 hover:bg-slate-300"}`,children:s}),d=s=>{const t=new Date;switch(l){case"today":return s.filter(a=>new Date(a.date).toDateString()===t.toDateString());case"week":{const a=new Date(t);return a.setDate(t.getDate()-t.getDay()),a.setHours(0,0,0,0),s.filter(n=>new Date(n.date)>=a)}case"month":{const a=new Date(t.getFullYear(),t.getMonth(),1);return s.filter(n=>new Date(n.date)>=a)}default:return s}},r=d(j),D=d(g),v=p.filter(s=>{if(s.status!=="finished"||!s.endTime)return!1;const t=new Date(s.endTime),a=new Date;switch(l){case"today":return t.toDateString()===a.toDateString();case"week":{const n=new Date(a);return n.setDate(a.getDate()-a.getDay()),n.setHours(0,0,0,0),t>=n}case"month":{const n=new Date(a.getFullYear(),a.getMonth(),1);return t>=n}default:return!1}}),N=r.reduce((s,t)=>s+t.total,0),b=v.reduce((s,t)=>s+(t.total||0),0),i=N+b,x=r.reduce((s,t)=>s+t.totalCost,0),u=i-x,m=D.reduce((s,t)=>s+t.amount,0),y=u-m,S=r.length,f=(()=>{const s=new Map;return r.forEach(t=>{t.items.forEach(a=>{const n=s.get(a.id);s.set(a.id,{name:a.name,count:((n==null?void 0:n.count)||0)+a.quantity})})}),Array.from(s.values()).sort((t,a)=>a.count-t.count).slice(0,5)})();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800",children:"Dashboard"}),e.jsxs("div",{className:"flex space-x-1 bg-slate-200 p-1 rounded-lg self-start sm:self-center",children:[e.jsx(c,{label:"Hoy",value:"today"}),e.jsx(c,{label:"Semana",value:"week"}),e.jsx(c,{label:"Mes",value:"month"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(o,{title:"Ingresos",value:`$${i.toFixed(2)}`,icon:e.jsx(C,{className:"h-6 w-6 text-green-600"})}),e.jsx(o,{title:"Costo de Mercancía",value:`$${x.toFixed(2)}`,icon:e.jsx(O,{className:"h-6 w-6 text-orange-600"})}),e.jsx(o,{title:"Ganancia Bruta",value:`$${u.toFixed(2)}`,icon:e.jsx(E,{className:"h-6 w-6 text-sky-600"})}),e.jsx(o,{title:"Gastos Operativos",value:`$${m.toFixed(2)}`,icon:e.jsx(P,{className:"h-6 w-6 text-red-600"})}),e.jsx(o,{title:"Ganancia Neta",value:`$${y.toFixed(2)}`,icon:e.jsx(T,{className:"h-6 w-6 text-indigo-600"})}),e.jsx(o,{title:"Órdenes",value:S.toString(),icon:e.jsx(F,{className:"h-6 w-6 text-yellow-600"})})]}),e.jsxs("div",{className:"mt-8 bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Top Productos Vendidos"}),f.length>0?e.jsx("ul",{className:"space-y-3",children:f.map((s,t)=>e.jsxs("li",{className:"flex justify-between items-center text-sm p-2 rounded-md even:bg-slate-50",children:[e.jsxs("span",{className:"font-medium text-slate-700",children:[t+1,". ",s.name]}),e.jsxs("span",{className:"font-bold text-slate-800 bg-slate-200 px-2 py-0.5 rounded-full",children:[s.count," ",e.jsx("span",{className:"font-medium text-slate-500",children:"vendidos"})]})]},s.name))}):e.jsx("p",{className:"text-center text-slate-500 py-4",children:"No hay datos de ventas para este periodo."})]})]})};export{R as default};
