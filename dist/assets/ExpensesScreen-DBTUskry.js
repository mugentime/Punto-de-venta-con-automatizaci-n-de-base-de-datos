import{r as h,j as e,u as g,b as N,c as b,T as p}from"./index-CecK8F-0.js";const v=({isOpen:o,onClose:i,onSave:f,expenseToEdit:l})=>{const m=()=>({date:new Date().toISOString().split("T")[0],description:"",amount:0,category:"Otro",type:"Emergente"}),[s,n]=h.useState(m());h.useEffect(()=>{o&&n(l?{...l,date:l.date.split("T")[0]}:m())},[l,o]);const a=d=>{const{name:x,value:c}=d.target;n(u=>({...u,[x]:x==="amount"?parseFloat(c)||0:c}))},r=d=>{if(d.preventDefault(),s.amount<=0){alert("El monto debe ser mayor a cero.");return}f({...s,date:new Date(s.date).toISOString()}),i()};return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4 overflow-y-auto",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-xl w-full max-w-md max-h-[90vh] my-auto flex flex-col",children:e.jsxs("form",{onSubmit:r,className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:l?"Editar Gasto":"Nuevo Gasto"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-600 mb-1",children:"Descripción"}),e.jsx("textarea",{name:"description",id:"description",value:s.description,onChange:a,rows:3,className:"mt-1 block w-full border border-slate-300 rounded-xl shadow-sm py-2 px-3 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-slate-600 mb-1",children:"Monto"}),e.jsx("input",{type:"number",name:"amount",id:"amount",value:s.amount,onChange:a,step:"0.01",className:"mt-1 block w-full border border-slate-300 rounded-xl shadow-sm py-2 px-3 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-slate-600 mb-1",children:"Fecha"}),e.jsx("input",{type:"date",name:"date",id:"date",value:s.date,onChange:a,className:"mt-1 block w-full border border-slate-300 rounded-xl shadow-sm py-2 px-3 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-slate-600 mb-1",children:"Categoría"}),e.jsxs("select",{name:"category",id:"category",value:s.category,onChange:a,className:"mt-1 block w-full border border-slate-300 rounded-xl shadow-sm py-2 px-3 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",required:!0,children:[e.jsx("option",{value:"Luz",children:"Luz"}),e.jsx("option",{value:"Internet",children:"Internet"}),e.jsx("option",{value:"Sueldos",children:"Sueldos"}),e.jsx("option",{value:"Inventario",children:"Inventario"}),e.jsx("option",{value:"Otro",children:"Otro"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 mb-1",children:"Tipo"}),e.jsxs("select",{name:"type",id:"type",value:s.type,onChange:a,className:"mt-1 block w-full border border-slate-300 rounded-xl shadow-sm py-2 px-3 focus:outline-none focus:ring-slate-500 focus:border-slate-500 sm:text-sm",required:!0,children:[e.jsx("option",{value:"Frecuente",children:"Frecuente"}),e.jsx("option",{value:"Emergente",children:"Emergente"})]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end space-x-3 rounded-b-3xl flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-white border border-slate-300 rounded-xl text-sm font-medium text-slate-700 hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-800 border border-transparent rounded-xl text-sm font-medium text-white hover:bg-slate-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Guardar"})]})]})})}):null},w=()=>{const{expenses:o,addExpense:i,updateExpense:f,deleteExpense:l}=g(),[m,s]=h.useState(!1),[n,a]=h.useState(null),r=(t=null)=>{a(t),s(!0)},d=()=>{a(null),s(!1)},x=t=>{"id"in t?f(t):i(t)},c=t=>{switch(t){case"Frecuente":return"bg-blue-100 text-blue-800";case"Emergente":return"bg-yellow-100 text-yellow-800";default:return"bg-slate-100 text-slate-800"}},u=o.sort((t,j)=>new Date(j.date).getTime()-new Date(t.date).getTime());return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800",children:"Gestión de Gastos"}),e.jsxs("button",{onClick:()=>r(),className:"flex items-center px-4 py-2 bg-slate-800 text-white rounded-xl shadow-sm hover:bg-slate-900 transition-colors",children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),"Nuevo Gasto"]})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto hidden md:block",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Fecha"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Descripción"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Categoría"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Tipo"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:"Monto"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:u.map(t=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-4 text-sm text-slate-500",children:new Date(t.date).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})}),e.jsx("td",{className:"p-4 text-sm text-slate-800 font-medium max-w-sm truncate",children:t.description}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:t.category}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${c(t.type)}`,children:t.type})}),e.jsxs("td",{className:"p-4 text-sm text-slate-800 font-medium text-right",children:["$",t.amount.toFixed(2)]}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>r(t),className:"p-2 text-slate-500 hover:text-blue-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(b,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>l(t.id),className:"p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(p,{className:"h-5 w-5"})})]})})]},t.id))})]})}),e.jsx("div",{className:"md:hidden",children:u.map(t=>e.jsxs("div",{className:"border-b p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("p",{className:"font-medium text-slate-800",children:t.description}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(t.date).toLocaleDateString("es-MX",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsxs("p",{className:"text-lg font-bold text-slate-800",children:["$",t.amount.toFixed(2)]})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-slate-600",children:t.category}),e.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs font-semibold rounded-full ${c(t.type)}`,children:t.type})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>r(t),className:"p-2 text-slate-500 hover:text-blue-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(b,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>l(t.id),className:"p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(p,{className:"h-5 w-5"})})]})]})]},t.id))}),o.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-8",children:"No hay gastos registrados."})]}),e.jsx(v,{isOpen:m,onClose:d,onSave:x,expenseToEdit:n})]})};export{w as default};
