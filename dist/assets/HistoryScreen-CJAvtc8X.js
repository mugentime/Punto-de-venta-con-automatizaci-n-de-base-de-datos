import{u as r,r as o,j as e,T as x}from"./index-CecK8F-0.js";const m=({order:s,onClose:n})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl w-full max-w-lg",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Detalles de la Orden"}),e.jsxs("p",{className:"text-sm text-slate-500 font-mono mt-1",children:["ID: ",s.id]})]}),e.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-800 -mt-2 -mr-2 p-2 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Fecha: ",new Date(s.date).toLocaleString()]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm text-slate-500 mb-4 bg-slate-50 p-3 rounded-2xl",children:[e.jsxs("div",{children:["Cliente: ",e.jsx("span",{className:"font-medium text-slate-700 block",children:s.clientName||"N/A"})]}),e.jsxs("div",{children:["Servicio: ",e.jsx("span",{className:"font-medium text-slate-700 block",children:s.serviceType})]}),e.jsxs("div",{children:["Pago: ",e.jsx("span",{className:"font-medium text-slate-700 block",children:s.paymentMethod})]})]}),e.jsx("div",{className:"border-t border-b py-2 my-4 space-y-2 max-h-48 overflow-y-auto",children:s.items.map(l=>e.jsxs("div",{className:"flex justify-between items-center text-sm pr-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:l.name}),e.jsxs("p",{className:"text-slate-500",children:[l.quantity," x $",l.price.toFixed(2)]})]}),e.jsxs("p",{className:"text-slate-700 font-medium",children:["$",(l.quantity*l.price).toFixed(2)]})]},l.id))}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Subtotal:"})," ",e.jsxs("span",{className:"text-slate-700",children:["$",s.subtotal.toFixed(2)]})]}),s.discount&&s.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Descuento:"})," ",e.jsxs("span",{children:["-$",s.discount.toFixed(2)]})]}),s.tip&&s.tip>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Propina:"})," ",e.jsxs("span",{className:"text-slate-700",children:["+$",s.tip.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t mt-2",children:[e.jsx("span",{className:"text-slate-800",children:"Total:"})," ",e.jsxs("span",{children:["$",s.total.toFixed(2)]})]})]})]}),e.jsx("div",{className:"bg-slate-50 px-6 py-4 flex justify-end rounded-b-3xl",children:e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-zinc-900 border border-transparent rounded-xl text-sm font-medium text-white hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500",children:"Cerrar"})})]})}),j=()=>{const{orders:s,deleteOrder:n}=r(),[l,i]=o.useState(null),d=async t=>{if(confirm("¿Estás seguro de que deseas eliminar esta orden? Esta acción no se puede deshacer."))try{await n(t),alert("Orden eliminada exitosamente")}catch(a){console.error("Error deleting order:",a)}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-800 mb-6",children:"Historial de Órdenes"}),e.jsxs("div",{className:"bg-white shadow-md rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto hidden md:block",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"ID Orden"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Fecha"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600",children:"Items"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-right",children:"Total"}),e.jsx("th",{className:"p-4 text-sm font-semibold text-slate-600 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"border-b hover:bg-slate-50",children:[e.jsx("td",{className:"p-4 text-sm text-slate-800 font-mono",children:t.id}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:new Date(t.date).toLocaleString()}),e.jsx("td",{className:"p-4 text-sm text-slate-500",children:t.items.reduce((a,c)=>a+c.quantity,0)}),e.jsxs("td",{className:"p-4 text-sm text-slate-800 font-medium text-right",children:["$",t.total.toFixed(2)]}),e.jsx("td",{className:"p-4 text-sm text-center",children:e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(t),className:"text-zinc-700 hover:underline font-medium",children:"Ver Detalles"}),e.jsx("button",{onClick:()=>d(t.id),className:"p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors",title:"Eliminar orden",children:e.jsx(x,{className:"h-5 w-5"})})]})})]},t.id))})]})}),e.jsx("div",{className:"md:hidden",children:s.map(t=>e.jsxs("div",{className:"border-b p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-mono text-sm text-slate-700 font-semibold",children:t.id}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(t.date).toLocaleString()})]}),e.jsxs("p",{className:"text-lg font-bold text-slate-800",children:["$",t.total.toFixed(2)]})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:[t.items.reduce((a,c)=>a+c.quantity,0)," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>i(t),className:"px-3 py-1 bg-slate-100 text-slate-800 text-xs font-semibold rounded-lg hover:bg-slate-200",children:"Ver Detalles"}),e.jsx("button",{onClick:()=>d(t.id),className:"p-2 text-slate-500 hover:text-red-600 rounded-full hover:bg-slate-100 transition-colors",title:"Eliminar orden",children:e.jsx(x,{className:"h-5 w-5"})})]})]})]},t.id))}),s.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-8",children:"No hay órdenes registradas."})]}),l&&e.jsx(m,{order:l,onClose:()=>i(null)})]})};export{j as default};
